-Get all role in 1 resource (example: category resource):

SELECT DISTINCT per.role_id 
	FROM mydb.permission AS per
  
	INNER JOIN mydb.user_role AS ur ON per.role_id = ur.role_id  AND allowed = 1

	INNER JOIN mydb.resource AS rs ON per.resource_id = rs.id
	
WHERE rs.code = 'category';

- Check 'userId' have role  'edit' in 'category':(example: userId = 2)

SELECT DISTINCT  count(user_id) AS result
	 FROM mydb.permission AS per 
	INNER JOIN mydb.user_role AS ur ON per.role_id = ur.role_id  AND allowed = 1

	INNER JOIN mydb.action AS ac ON per.action_id = ac.id
	INNER JOIN mydb.resource AS rs ON per.resource_id = rs.id

	WHERE ac.code = 'edit' AND rs.code = 'category'  and ur.user_id = 2;

SELECT DISTINCT  count(user_id) AS result
	 FROM mydb.permission AS per 
	INNER JOIN mydb.user_role AS ur ON per.role_id = ur.role_id  AND allowed = 1

	INNER JOIN mydb.action AS ac ON per.action_id = ac.id
	INNER JOIN mydb.resource AS rs ON per.resource_id = rs.id

	WHERE ac.code = 'edit' AND rs.code = 'category'  and ur.user_id = 2;